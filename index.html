<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BossX Panel</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    body[data-theme="light"] {
      --bg: linear-gradient(135deg, #6a11cb, #ff0080);
      --panel: transparent;
      --panel-2: transparent;
      --text: #ffffff;
      --muted: #f5d0fe;
      --accent: #ffd700;
      --hover: rgba(255, 255, 255, 0.1);
      --border: rgba(255, 255, 255, 0.2);
    }
    body[data-theme="dark"] {
      --bg: #000000;
      --panel: transparent;
      --panel-2: transparent;
      --text: #ffd700;
      --muted: #b8860b;
      --accent: #ffd700;
      --hover: rgba(255, 215, 0, 0.15);
      --border: rgba(255, 215, 0, 0.3);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0; display: flex;
      background: var(--bg);
      background-attachment: fixed;
      background-size: cover;
      color: var(--text);
      font-family: Inter, sans-serif;
    }
    .sidebar {
      width: 240px; height: 100vh; position: fixed;
      background: var(--panel);
      border-right: 1px solid var(--border);
      display: flex; flex-direction: column;
      backdrop-filter: blur(8px);
    }
    .brand {
      padding: 18px 16px; background: var(--panel-2);
      border-bottom: 1px solid var(--border);
      display: flex; align-items: center; gap: 10px;
    }
    .brand .logo { width: 60px; height: 60px; object-fit: contain; }
    .brand-text { display: flex; flex-direction: column; line-height: 1.2; }
    .brand-text .name { font-weight: 800; font-size: 20px; color: var(--accent); }
    .brand-text .tagline { font-size: 14px; color: var(--muted); }
    .menu { list-style: none; padding: 8px 0; margin: 0; flex: 1; }
    .menu li {
      padding: 12px 16px; display: flex; align-items: center; gap: 10px;
      cursor: pointer; border-left: 3px solid transparent;
      transition: background .15s, border-color .15s;
    }
    .menu li:hover { background: var(--hover); }
    .menu li.active {
      background: var(--hover);
      border-left-color: var(--accent);
      color: var(--accent);
    }
    .main { margin-left: 240px; display: flex; flex-direction: column; width: 100%; }
    .header {
      background: var(--panel-2);
      border-bottom: 1px solid var(--border);
      padding: 10px 20px;
      display: flex; align-items: center; gap: 12px;
      backdrop-filter: blur(8px);
    }
    #realtimeClock { font-weight: bold; font-size: 16px; color: var(--accent); }
    .user-info { text-align: right; }
    .user-info .name { font-weight: 700; font-size: 16px; }
    .user-info .validator { font-size: 14px; color: var(--muted); }
    .avatar {
      width: 60px; height: 60px; border-radius: 50%;
      object-fit: cover; border: 2px solid var(--accent);
    }
    .content { padding: 20px; flex: 1; }
    .card {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 10px; padding: 16px;
      backdrop-filter: blur(8px);
      transition: all 0.4s ease;
    }
    .card:hover {
      box-shadow: 0 0 20px var(--accent), 0 0 40px #fff8dc;
      transform: translateY(-6px);
    }
    .input, .btn, .table { width: 100%; }
    .input {
      padding: 10px; border-radius: 6px;
      border: 1px solid var(--border);
      background: var(--panel-2); color: var(--text);
      margin-bottom: 10px;
    }
    .btn {
      padding: 10px 16px; border-radius: 6px; border: none;
      cursor: pointer; background: var(--accent);
      color: #000; font-weight: 600;
    }
    .btn.secondary { background: #2b3646; color: var(--text); }
    .btn:disabled { opacity: .6; cursor: not-allowed; }
    .table { border-collapse: collapse; }
    .table th, .table td {
      padding: 10px; border: 1px solid var(--border); text-align: left;
    }
    .table thead tr { background: var(--panel-2); }
    .log-container {
      background: #000; color: #00ff88; font-family: monospace;
      font-size: 13px; padding: 10px; border-radius: 6px;
      border: 1px solid var(--border); height: 300px; overflow-y: auto;
    }
    .toast {
      position: fixed; right: 20px; bottom: 20px;
      padding: 12px 14px; background: var(--panel-2);
      color: var(--text); border: 1px solid var(--border);
      border-left: 4px solid var(--accent); border-radius: 8px;
      opacity: 0; transform: translateY(10px);
      transition: opacity .2s, transform .2s;
      max-width: 320px; z-index: 1000;
    }
    .toast.show { opacity: 1; transform: translateY(0); }

    /* Responsif untuk Log & History berdampingan */
    .log-history-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    @media (max-width: 900px) {
      .log-history-container {
        grid-template-columns: 1fr;
      }
    }
    @media (max-width: 720px) {
      .sidebar { position: fixed; transform: translateX(-100%); transition: transform .2s; z-index: 100; }
      .sidebar.open { transform: translateX(0); }
      .main { margin-left: 0; }
    }
  </style>
</head>
<body data-theme="light">

<!-- Sidebar -->
<aside class="sidebar" id="sidebar">
  <div class="brand">
    <img src="https://i.ibb.co/qYBkPDH3/Picsart-25-04-01-16-25-47-054.png" class="logo">
    <div class="brand-text">
      <span class="name">BossX</span>
      <span class="tagline">Software Masternode</span>
    </div>
  </div>
  <ul class="menu" id="menu">
    <li class="active" data-page="masternode"><i class="fa fa-server"></i> Masternode</li>
    <li data-page="deposit"><i class="fa fa-wallet"></i> Deposit</li>
    <li data-page="withdrawal"><i class="fa fa-money-bill-transfer"></i> Withdrawal</li>
    <li data-page="p2p"><i class="fa fa-exchange-alt"></i> Peer to Peer</li>
    <li data-page="settings"><i class="fa fa-cog"></i> Settings</li>
  </ul>
</aside>

<!-- Main -->
<div class="main">
  <div class="header">
    <button class="btn secondary" id="toggleSidebar" style="display:none">
      <i class="fa fa-bars"></i>
    </button>
    <div id="realtimeClock"></div>
    <div style="flex:1"></div>
    <div class="user-info">
      <div class="name">Master</div>
      <div class="validator">Validator ID: 8055x</div>
    </div>
    <img src="https://i.ibb.co/3y8VZfP/profile.jpg" class="avatar">
  </div>
  <div class="content" id="content">
    <!-- Form Aktivasi -->
    <div class="card" style="margin-bottom:20px;">
      <h2 style="color:var(--accent)">Masternode</h2>
      <input type="number" id="masternodeAmount" class="input" placeholder="Masukkan jumlah BossX">
      <button id="activateMasternode" class="btn" disabled>Aktivasi Masternode</button>
    </div>

    <!-- 5 Card -->
    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:20px;margin-bottom:20px;">
      <div class="card">
        <h3>Node Amount</h3>
        <p id="nodeAmountDisplay">0 BossX</p>
      </div>
      <div class="card">
        <h3>Validasi</h3>
        <p id="validationValue">0.0000000000 BossX</p>
        <p id="validationStatus" style="color:var(--muted)">Belum berjalan</p>
        <button id="toggleValidation" class="btn secondary">Mulai / Stop</button>
      </div>
      <div class="card">
        <h3>Reward</h3>
        <p id="rewardValue">0.0000000000 BossX</p>
        <p>Auto-claim dalam <span id="autoClaimCountdown">60</span> detik</p>
        <button id="convertBtn" class="btn">Convert ke USDT</button>
      </div>
      <div class="card">
        <h3>Balance USDT</h3>
        <p id="usdtBalance">$0.00</p>
        <p>Deposit: <span id="usdtDeposit">$0.00</span></p>
        <p>Reward: <span id="usdtReward">$0.00</span></p>
        <p>Update: <span id="usdtLastUpdate">-</span></p>
        <button id="refreshUsdtBtn" class="btn secondary">Refresh</button>
      </div>
      <div class="card">
        <h3>Status Kontrak</h3>
        <p id="contractStatus">Belum aktif</p>
        <p>Sisa waktu: <span id="contractCountdown">-</span></p>
      </div>
    </div>

    <!-- Log & History berdampingan -->
    <div class="log-history-container">
      <!-- Log Aktivasi -->
      <div class="card">
        <h3>Log Aktivasi</h3>
        <div id="logContainer" class="log-container">
          <pre id="logOutput">[Log dimulai]</pre>
        </div>
      </div>

      <!-- History Aktivasi -->
      <div class="card">
        <h2 style="color:var(--accent)">Riwayat Aktivasi</h2>
        <table class="table">
          <thead>
            <tr>
              <th>Hari</th>
              <th>Tanggal</th>
              <th>Waktu</th>
              <th>Jumlah</th>
              <th>Jenis</th>
              <th>Masa Kontrak</th>
            </tr>
          </thead>
          <tbody id="activationHistory"></tbody>
        </table>
      </div>
    </div>
<script>
const menuItems = document.querySelectorAll('#menu li');
const content = document.getElementById('content');
const sidebar = document.getElementById('sidebar');
const toggleSidebar = document.getElementById('toggleSidebar');

// Jam realtime
function updateClock() {
  const now = new Date();
  document.getElementById('realtimeClock').textContent = now.toLocaleString();
}
setInterval(updateClock, 1000);
updateClock();

// Toast
function showToast(message, type = 'info') {
  const toast = document.createElement('div');
  toast.className = 'toast';
  toast.innerHTML = message;
  document.body.appendChild(toast);
  setTimeout(() => toast.classList.add('show'), 100);
  setTimeout(() => {
    toast.classList.remove('show');
    setTimeout(() => toast.remove(), 200);
  }, 3000);
}

// Render halaman
function render(page) {
  if (page === 'masternode') {
    const amountInput = document.getElementById('masternodeAmount');
    const btnActivate = document.getElementById('activateMasternode');
    const nodeAmountDisplay = document.getElementById('nodeAmountDisplay');
    const logOutput = document.getElementById('logOutput');
    const historyTable = document.getElementById('activationHistory');
    const contractStatus = document.getElementById('contractStatus');
    const contractCountdown = document.getElementById('contractCountdown');
    let activated = false;

    amountInput.addEventListener('input', () => {
      if (!activated) {
        const val = parseFloat(amountInput.value);
        btnActivate.disabled = !(val >= 50);
      }
    });

    btnActivate.addEventListener('click', () => {
      if (activated) return;
      const val = parseFloat(amountInput.value);
      if (val >= 50) {
        activated = true;
        nodeAmountDisplay.textContent = `${val} BossX`;
        showToast(`Masternode diaktifkan dengan ${val} BossX`, 'success');
        logOutput.textContent += `\n[${new Date().toLocaleString()}] Masternode diaktifkan dengan ${val} BossX`;
        document.getElementById('logContainer').scrollTop = document.getElementById('logContainer').scrollHeight;
        amountInput.disabled = true;
        btnActivate.disabled = true;

        // Status Kontrak aktif
        contractStatus.textContent = "Aktif";
        const endTime = new Date(Date.now() + 31536000000); // 31.536.000 detik
        contractCountdown.dataset.endtime = endTime.toISOString();

        // Tambah ke tabel riwayat
        const now = new Date();
        const days = ['Minggu','Senin','Selasa','Rabu','Kamis','Jumat','Sabtu'];
        const dayName = days[now.getDay()];
        const date = `${String(now.getDate()).padStart(2,'0')}-${String(now.getMonth()+1).padStart(2,'0')}-${now.getFullYear()}`;
        const time = `${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}:${String(now.getSeconds()).padStart(2,'0')}`;
        const amount = `${val} BossX`;
        const type = 'Masternode';

        const row = document.createElement('tr');
        row.innerHTML = `<td>${dayName}</td>
                         <td>${date}</td>
                         <td>${time}</td>
                         <td>${amount}</td>
                         <td>${type}</td>
                         <td class="contract-timer" data-endtime="${endTime.toISOString()}"></td>`;
        historyTable.appendChild(row);
      } else {
        showToast('Minimal 50 BossX untuk aktivasi', 'error');
      }
    });
  }
}
// Countdown untuk semua kontrak & card Status Kontrak
function startContractCountdown() {
  setInterval(() => {
    // Countdown di tabel
    document.querySelectorAll('.contract-timer').forEach(cell => {
      const endTime = new Date(cell.dataset.endtime);
      const now = new Date();
      let diff = endTime - now;

      if (diff <= 0) {
        cell.textContent = "Expired";
        return;
      }

      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = String(Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))).padStart(2, '0');
      const minutes = String(Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60))).padStart(2, '0');
      const seconds = String(Math.floor((diff % (1000 * 60)) / 1000)).padStart(2, '0');

      cell.textContent = `${days} hari ${hours}:${minutes}:${seconds}`;
    });

    // Countdown di card Status Kontrak
    const contractCountdown = document.getElementById('contractCountdown');
    if (contractCountdown && contractCountdown.dataset.endtime) {
      const endTime = new Date(contractCountdown.dataset.endtime);
      const now = new Date();
      let diff = endTime - now;

      if (diff <= 0) {
        contractCountdown.textContent = "Expired";
        return;
      }

      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = String(Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))).padStart(2, '0');
      const minutes = String(Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60))).padStart(2, '0');
      const seconds = String(Math.floor((diff % (1000 * 60)) / 1000)).padStart(2, '0');

      contractCountdown.textContent = `${days} hari ${hours}:${minutes}:${seconds}`;
    }
  }, 1000);
}
startContractCountdown();

// Logika Validasi
let validationRunning = false;
let validationInterval;
document.getElementById('toggleValidation')?.addEventListener('click', () => {
  const status = document.getElementById('validationStatus');
  const value = document.getElementById('validationValue');
  if (!validationRunning) {
    validationRunning = true;
    status.textContent = "Berjalan...";
    validationInterval = setInterval(() => {
      let current = parseFloat(value.textContent);
      current += 0.0000000001;
      value.textContent = current.toFixed(10) + " BossX";
    }, 1000);
  } else {
    validationRunning = false;
    status.textContent = "Berhenti";
    clearInterval(validationInterval);
  }
});

// Logika Reward
let rewardCountdown = 60;
setInterval(() => {
  if (rewardCountdown > 0) {
    rewardCountdown--;
    document.getElementById('autoClaimCountdown').textContent = rewardCountdown;
  } else {
    let rewardVal = parseFloat(document.getElementById('rewardValue').textContent);
    rewardVal += 0.0000000005;
    document.getElementById('rewardValue').textContent = rewardVal.toFixed(10) + " BossX";
    rewardCountdown = 60;
  }
}, 1000);

// Convert ke USDT
document.getElementById('convertBtn')?.addEventListener('click', () => {
  let rewardVal = parseFloat(document.getElementById('rewardValue').textContent);
  if (rewardVal > 0) {
    let usdt = rewardVal * 0.5; // contoh rate
    let currentUSDT = parseFloat(document.getElementById('usdtBalance').textContent.replace('$',''));
    document.getElementById('usdtBalance').textContent = `$${(currentUSDT + usdt).toFixed(2)}`;
    document.getElementById('usdtReward').textContent = `$${(parseFloat(document.getElementById('usdtReward').textContent.replace('$','')) + usdt).toFixed(2)}`;
    document.getElementById('usdtLastUpdate').textContent = new Date().toLocaleString();
    document.getElementById('rewardValue').textContent = "0.0000000000 BossX";
    showToast(`Reward dikonversi ke USDT: $${usdt.toFixed(2)}`, 'success');
  } else {
    showToast('Tidak ada reward untuk dikonversi', 'error');
  }
});
// Refresh USDT Balance
document.getElementById('refreshUsdtBtn')?.addEventListener('click', () => {
  let currentUSDT = parseFloat(document.getElementById('usdtBalance').textContent.replace('$',''));
  let randomAdd = (Math.random() * 5).toFixed(2);
  document.getElementById('usdtBalance').textContent = `$${(currentUSDT + parseFloat(randomAdd)).toFixed(2)}`;
  document.getElementById('usdtDeposit').textContent = `$${(parseFloat(document.getElementById('usdtDeposit').textContent.replace('$','')) + parseFloat(randomAdd)).toFixed(2)}`;
  document.getElementById('usdtLastUpdate').textContent = new Date().toLocaleString();
  showToast(`USDT Balance bertambah $${randomAdd}`, 'success');
});

// Navigasi antar halaman
menuItems.forEach(item => {
  item.addEventListener('click', () => {
    menuItems.forEach(i => i.classList.remove('active'));
    item.classList.add('active');
    const page = item.dataset.page;
    if (page === 'masternode') {
      location.reload(); // reload untuk reset event listener
    } else {
      content.innerHTML = `<div class="card"><h2 style="color:var(--accent)">${page.charAt(0).toUpperCase() + page.slice(1)}</h2><p>Halaman ${page} dalam pengembangan...</p></div>`;
    }
  });
});

// Sidebar toggle untuk mobile
document.getElementById('toggleSidebar').addEventListener('click', () => {
  sidebar.classList.toggle('open');
});
</script>
<script>
// Pastikan halaman Masternode aktif saat pertama kali dibuka
document.addEventListener('DOMContentLoaded', () => {
  render('masternode');
});
</script>

</div> <!-- penutup .content -->
</div> <!-- penutup .main -->

</body>
</html>
